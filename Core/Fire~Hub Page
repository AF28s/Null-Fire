local function getGlobalTable()
	return typeof(getfenv().getgenv) == "function" and typeof(getfenv().getgenv()) == "table" and getfenv().getgenv() or _G
end
local versions = getGlobalTable()._FLVersions
local lib = getGlobalTable()._FIRELIB

return function()
	local self = getGlobalTable()._FHCW
	if not self then return end
	local page = self:AddPage({Title = "Fire~Hub", Order = 998})
	page:AddLabel({Text = "Fire-Hub version: "..versions.FireHubVersion})
	page:AddLabel({Text = "Fire-Lib version: "..versions.FireLibraryVersion})
	local isExec = true
	local exec, ver
	if typeof(getfenv().identifyexecutor) == "function" then
		exec, ver = getfenv().identifyexecutor()
		if typeof(exec) == "string" and typeof(ver) ~= "string" then
			ver = "Unknown"
		elseif typeof(exec) ~= "string" then
			isExec = false
			ver = getfenv().version()
			exec = (game["Run Service"]:IsStudio() and "Studio" or "RobloxApp") .. (game["Run Service"]:IsClient() and "Client" or "Server")
		end
	else
		ver = getfenv().version()
		exec = (game["Run Service"]:IsStudio() and "Studio" or "RobloxApp") .. (game["Run Service"]:IsClient() and "Client" or "Server")
		isExec = false
	end
	page:AddLabel({Text = "Executor: "..exec..", Version: "..ver})
	if isExec then
		page:AddSeparator()
		page:AddTextBox({Enter = false, Text = "Spoof Executor", Placeholder = "Example: [ExecName, Version]", Default = exec..", "..ver, Callback = function(txt)
			local splits = txt:split(", ")
			local execu, vers = splits[1], splits[2]
			local getgenv = getfenv().getgenv or getfenv
			getgenv().identifyexecutor = function()
				return execu, vers
			end
			getgenv().getexecutor = getgenv().identifyexecutor
			getgenv().getexecutorname = getgenv().identifyexecutor
			getgenv().executor = execu
		end})
	end
	local qotp = getfenv().queue_on_teleport or getfenv().queueonteleport
	if qotp then
		local keep = false
		page:AddToggle({Text = "Keep Fire~Hub on teleport", Callback = function(b)
			keep = b
			if b then
				lib.Notifications:Notification({Title = "Warning", Text = "If you will close Fire~Hub,\nTHAT SETTING WONT APPLY!\n\nYou need to keep Fire~Hub opened!"})
			end
		end})
		game.Players.LocalPlayer.OnTeleport:Connect(function()
			if self.Opened and keep then
				qotp([[loadstring(game:HttpGet("https://raw.githubusercontent.com/InfernusScripts/Fire-Hub/main/Loader"))()]])
			end
		end)
	end
end
