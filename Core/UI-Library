local id = 17545462180
print("Fire-Library ID: "..id)

local isMobile = game.UserInputService.TouchEnabled and not game.UserInputService.KeyboardEnabled

local uiHolder
if typeof(gethui) == "function" and pcall(gethui) == true and gethui() then
    uiHolder = gethui()
elseif isMobile then
    uiHolder = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")
else
    if pcall(function() return game:GetService("CoreGui"):GetFullName() end) == true then
        uiHolder = game:GetService("CoreGui")
    else
        uiHolder = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")
    end
end

local root = uiHolder:FindFirstChild("FireLib") and nil or game:GetObjects("rbxassetid://"..id)
local lib = uiHolder:FindFirstChild("FireLib") or (typeof(root[#root]) == "Instance" and root[#root] or error(tostring(root[#root]))):Clone()

lib.Parent = uiHolder

local module = lib:FindFirstChildOfClass("ModuleScript")

local function isEmptyString(str)
    return str and str:gsub("\10",""):gsub("\13",""):gsub(" ",""):gsub("\9","") == "" or false
end

local loadedSource = ""

pcall(function()
    loadedSource = "local script = table.pack(...)[1]; "..module.Source
end)

if not isEmptyString(module.Source) and not isEmptyString(loadedSource) then
    return loadstring(loadedSource)(module)
else
    return require(module)
end
