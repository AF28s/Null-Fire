local id = 17545025222
print("Fire-Library ID: "..id)

local isMobile = game.UserInputService.TouchEnabled and not game.UserInputService.KeyboardEnabled

local uiHolder
if typeof(gethui) == "function" and pcall(gethui) == true and gethui() then
    uiHolder = gethui()
elseif isMobile then
    uiHolder = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")
else
    if pcall(function() return game:GetService("CoreGui"):GetFullName() end) == true then
        uiHolder = game:GetService("CoreGui")
    else
        uiHolder = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")
    end
end

local root = uiHolder:FindFirstChild("FireLib") and nil or game:GetObjects("rbxassetid://"..id)
local lib = uiHolder:FindFirstChild("FireLib") or root[#root]:Clone()

lib.Parent = game.TextChatService
local module = lib:FindFirstChildOfClass("ModuleScript")

coroutine.wrap(function()
    task.wait(0.1)
    lib.Parent = uiHolder
end)()

local function isEmptyString(str)
    return not not str and str:gsub("\10",""):gsub("\13",""):gsub(" ",""):gsub("\9","") == "" or not str
end

local loadedSource

pcall(function()
    loadedSource = "local script = game.TextChatService[\""..lib.Name.."\"]:FindFirstChildOfClass(\"ModuleScript\")\10"..module.Source
end)

if not isEmptyString(module.Source) and not isEmptyString(loadedSource) then
    return loadstring(loadedSource)()
else
    return require(module)
end
