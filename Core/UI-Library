local id = 17566397182
local updates = 1
print("Fire-Library ID: "..id.."\nUpdates: "..updates)

local isMobile = game.UserInputService.TouchEnabled and not game.UserInputService.KeyboardEnabled

local uiHolder
if typeof(gethui) == "function" and pcall(gethui) == true and gethui() then
    uiHolder = gethui()
elseif isMobile then
    uiHolder = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")
else
    if pcall(function() return game:GetService("CoreGui"):GetFullName() end) == true then
        uiHolder = game:GetService("CoreGui")
    else
        uiHolder = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")
    end
end

local root = game:GetObjects("rbxassetid://"..id)
local lib = uiHolder:FindFirstChild("FireLib")
if lib then
    root:Destroy()
else
    lib = root[#root]:Clone()
end

lib.Parent = uiHolder
local module = lib:FindFirstChildOfClass("ModuleScript")

local function isEmptyString(str)
    return str and str:gsub("\10",""):gsub("\13",""):gsub(" ",""):gsub("\9","") == "" or false
end

local loadedSource = ""

pcall(function()
    loadedSource = "local script = table.pack(...)[1]; "..module.Source
end)

if not isEmptyString(module.Source) and not isEmptyString(loadedSource) then
    local s,_ = loadstring(loadedSource)(module)
    if s then
        local s,e = pcall(function()
            lib = s()
            return lib.Notifications.Notification, lib.MakeWindow == nil and error()
        end)
        if s then
            return lib
        else
            return require(module)
        end
    else
        return require(module)
    end
else
    return require(module)
end
